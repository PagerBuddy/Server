<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Global - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Config_Config.html">Config</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add_alarm">add_alarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add_alarm_history">add_alarm_history</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add_group">add_group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add_user_group">add_user_group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add_zvei">add_zvei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#alarm">alarm</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#alarm_queue">alarm_queue</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#alarm_queue_active">alarm_queue_active</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#authenticate_group">authenticate_group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clear_history">clear_history</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#connect_database">connect_database</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#copy_db">copy_db</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#db">db</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#DB_PATH">DB_PATH</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_chat_ids_from_zvei">get_chat_ids_from_zvei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_check_users_list">get_check_users_list</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_current_timestamp">get_current_timestamp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_device_ids_from_zvei">get_device_ids_from_zvei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_group_alarms">get_group_alarms</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_group_details">get_group_details</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_group_id_from_chat_id">get_group_id_from_chat_id</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_groups">get_groups</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_zvei">get_zvei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_zvei_details">get_zvei_details</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get_zvei_ids_for_group">get_zvei_ids_for_group</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#HISTORY_TIMEOUT_MS">HISTORY_TIMEOUT_MS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_alarm_information_update">is_alarm_information_update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_auth_token_safe">is_auth_token_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_chat_id_safe">is_chat_id_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_device_token_safe">is_device_token_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_numeric_safe">is_numeric_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_repeat_alarm">is_repeat_alarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_test_time">is_test_time</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_text_safe">is_text_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_time_safe">is_time_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#is_zvei_safe">is_zvei_safe</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#log">log</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#logger">logger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#queue_alarm">queue_alarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#queue_katsys">queue_katsys</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove_alarm">remove_alarm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove_group">remove_group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove_user">remove_user</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove_user_link">remove_user_link</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove_zvei">remove_zvei</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#replace_chat_id">replace_chat_id</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#run_queue">run_queue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setup_cleaner">setup_cleaner</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#sql_query">sql_query</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#sql_run">sql_run</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#step_alarms">step_alarms</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#TIMEZONE">TIMEZONE</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#update_group">update_group</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#update_user">update_user</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#user_chat_ids">user_chat_ids</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#user_token">user_token</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Global</h1>
    

    




<section>

<header>
    
        <h2>
        
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<div class="section-members">
<h4 class="name" id="alarm_queue"><span class="type-signature">(constant) </span>alarm_queue<span class="type-signature"> :Array.&lt;<a href="global.html#queue_item">queue_item</a>></span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line34">line 34</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>Array.&lt;<a href="global.html#queue_item">queue_item</a>></code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="alarm_queue_active"><span class="type-signature"></span>alarm_queue_active<span class="type-signature"> :boolean</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line37">line 37</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>boolean</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="db"><span class="type-signature"></span>db<span class="type-signature"> :sqlite3.Database</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>sqlite3.Database</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="DB_PATH"><span class="type-signature"></span>DB_PATH<span class="type-signature"> :string</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line24">line 24</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>string</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="HISTORY_TIMEOUT_MS"><span class="type-signature"></span>HISTORY_TIMEOUT_MS<span class="type-signature"> :number</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line21">line 21</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>number</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="log"><span class="type-signature"></span>log<span class="type-signature"> :winston.Logger</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line27">line 27</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>winston.Logger</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="logger"><span class="type-signature"></span>logger<span class="type-signature"> :winston.Logger</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line40">line 40</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>winston.Logger</code></span>


        </li>
    </ul>





</div>

        
            
<div class="section-members">
<h4 class="name" id="TIMEZONE"><span class="type-signature"></span>TIMEZONE<span class="type-signature"> :string</span></h4>








<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>string</code></span>


        </li>
    </ul>





</div>

        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="add_alarm"><span class="type-signature"></span>add_alarm<span class="signature">(zvei_id, group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Adds an alarm link between a ZVEI unit and a group.
Example: add_alarm(25977, 4) links the ZVEI ID 25977 to the group with ID 4 ("B1").
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line768">line 768</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the group.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="add_alarm_history"><span class="type-signature"></span>add_alarm_history<span class="signature">(zvei_id, timestamp, information_content)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Add an alarm for the provided ZVEI to the history DB for double alert detection.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line519">line 519</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit for which the alert was received.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                The point in Unix time when the alarm was received by the interface.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>information_content</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                An integer representing the alarms information content. Depends on interfacae device.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="add_group"><span class="type-signature"></span>add_group<span class="signature">(description)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>

    



<div class="description">
    Add a group.
Hint: The group ID is an auto-increment column, so an ID is automatically assigned to the new group.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line630">line 630</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                description of the group to be created.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;string></code></span>


    </dd>
</dl>


<div class="param-desc">
    The authentication token.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="add_user_group"><span class="type-signature"></span>add_user_group<span class="signature">(user_id, group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Links a user to an alarm by adding a new entry in UserGroups.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line863">line 863</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Group ID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="add_zvei"><span class="type-signature"></span>add_zvei<span class="signature">(zvei_id, description, test_day, test_time_start, test_time_end)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Adds a ZVEI unit.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line423">line 423</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Description of the ZVEI unit.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>test_day</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Day of the week of the test alarm (Sunday = 0 , Monday = 1, ...).
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>test_time_start</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Start time of the test alarm window (format: HH:MM).
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>test_time_end</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                End time of the test alarm window (format: HH:MM).
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="alarm"><span class="type-signature">(async) </span>alarm<span class="signature">(zvei_id, timestamp, information_content, text, is_manual)</span><span class="type-signature"> &rarr; {Promise.&lt;Boolean>}</span></h4>

    



<div class="description">
    Activates alarm for a given group.
For example: zvei_id = 25978 -> Schnelleinsatzgruppe Transport ER Stadt 1 (SEG Tr ER 1)
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line114">line 114</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                ZVEI ID of the group to be alarmed.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                Point in Unix-time when alerm was detected by decoder.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>information_content</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                The information level of the alarm source. This is a INFORMATION_CONTENT integer for the alarm interface.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>String</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                Content of the alert message.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>is_manual</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Boolean</code></span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">
                If the alert was triggered manually (typically for testing).
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    If the alert was sent or supressed.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="authenticate_group"><span class="type-signature"></span>authenticate_group<span class="signature">(chat_id, auth_token)</span><span class="type-signature"> &rarr; {Promise.&lt;number>}</span></h4>

    



<div class="description">
    Authenticates a group.
Explanation: When a new group is added, an authentication token is generated and communicated to the group.
If the authentication is then sent to the Telegram bot within the group, the group is authenticated and the chat ID is added in the database.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line658">line 658</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>chat_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                chat ID of the group.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth_token</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                authentication token generated when the group was added.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;number></code></span>


    </dd>
</dl>


<div class="param-desc">
    The group ID if authenticated. -1 otherwise.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="clear_history"><span class="type-signature">(async) </span>clear_history<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Empties all obsolete entries from the AlertHistory table. This should be performed before every table query.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line470">line 470</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="connect_database"><span class="type-signature"></span>connect_database<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Initialises database connection. Should be called on startup.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line990">line 990</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Promise to await initialisation complete.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="copy_db"><span class="type-signature"></span>copy_db<span class="signature">(file)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Copy the current DB to the specified file.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="backup.js.html">backup.js</a>, <a href="backup.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The destination for the backup file.
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_chat_ids_from_zvei"><span class="type-signature"></span>get_chat_ids_from_zvei<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;number>>}</span></h4>

    



<div class="description">
    Gets the chat_ids linked to a given ZVEI unit.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line236">line 236</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of a ZVEI unit.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;number>></code></span>


    </dd>
</dl>


<div class="param-desc">
    list of chat IDs linked to the ZVEI unit.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_check_users_list"><span class="type-signature"></span>get_check_users_list<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{user_id: number, group_id: number, chat_id: string, token: string}>>}</span></h4>

    



<div class="description">
    Gets the list of alarm subscriptions for FCM.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line264">line 264</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{user_id: number, group_id: number, chat_id: string, token: string}>></code></span>


    </dd>
</dl>


<div class="param-desc">
    An array of alert subscriptions [[user_id, group_id, chat_id]].
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_current_timestamp"><span class="type-signature"></span>get_current_timestamp<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="backup.js.html">backup.js</a>, <a href="backup.js.html#line43">line 43</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    String representation of the current time (trying to mimic the YYYYMMDD-HHMMSS format)
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_device_ids_from_zvei"><span class="type-signature"></span>get_device_ids_from_zvei<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{token: string, chat_id: string, user_id: number}>>}</span></h4>

    



<div class="description">
    Gets the FCM device tokens and chatIDs linked to a given ZVEI unit.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line283">line 283</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of a ZVEI unit.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{token: string, chat_id: string, user_id: number}>></code></span>


    </dd>
</dl>


<div class="param-desc">
    List of device tokens, chat IDs and user IDs linked to the ZVEI unit.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_group_alarms"><span class="type-signature"></span>get_group_alarms<span class="signature">(group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{zvei_id: number, description: string}>>}</span></h4>

    



<div class="description">
    Return a list of ZVEIs (id and descriptor) that a group is linked to.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line604">line 604</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of group to query,
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{zvei_id: number, description: string}>></code></span>


    </dd>
</dl>


<div class="param-desc">
    A list of linked alarms.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_group_details"><span class="type-signature"></span>get_group_details<span class="signature">(group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{group_id: number, description: string, chat_id: string, auth_token: string}>>}</span></h4>

    



<div class="description">
    Return all information for a group.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line583">line 583</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of group to query.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{group_id: number, description: string, chat_id: string, auth_token: string}>></code></span>


    </dd>
</dl>


<div class="param-desc">
    Full DB entry for group.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_group_id_from_chat_id"><span class="type-signature"></span>get_group_id_from_chat_id<span class="signature">(chat_id)</span><span class="type-signature"> &rarr; {Promise.&lt;number>}</span></h4>

    



<div class="description">
    Gets the corresponding group ID from a chat ID.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line813">line 813</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>chat_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Chat ID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;number></code></span>


    </dd>
</dl>


<div class="param-desc">
    Group ID.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_groups"><span class="type-signature"></span>get_groups<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{group_id: number, description: string, chat_id: string, auth_token: string}>>}</span></h4>

    



<div class="description">
    Get the complete group table.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line568">line 568</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{group_id: number, description: string, chat_id: string, auth_token: string}>></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_zvei"><span class="type-signature"></span>get_zvei<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;{zvei_id: number, description: string, test_day: number, test_time_start: string, test_time_end: string}>>}</span></h4>

    



<div class="description">
    Gets all ZVEI units.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line379">line 379</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;{zvei_id: number, description: string, test_day: number, test_time_start: string, test_time_end: string}>></code></span>


    </dd>
</dl>


<div class="param-desc">
    List of configured ZVEI units.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_zvei_details"><span class="type-signature"></span>get_zvei_details<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>

    



<div class="description">
    Get the ZVEI description.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line394">line 394</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;string></code></span>


    </dd>
</dl>


<div class="param-desc">
    The ZVEI description or "".
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="get_zvei_ids_for_group"><span class="type-signature"></span>get_zvei_ids_for_group<span class="signature">(group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;number>>}</span></h4>

    



<div class="description">
    Gets all ZVEIs that are linked to a specific telegram group.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line309">line 309</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                The group ID to retieve ZVEIs for.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;number>></code></span>


    </dd>
</dl>


<div class="param-desc">
    : List of ZVEIs linked to the group.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">(timezone, history_timeout, db_path)</span><span class="type-signature"></span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timezone</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>history_timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db_path</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_alarm_information_update"><span class="type-signature"></span>is_alarm_information_update<span class="signature">(zvei_id, information_content)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Check if the information level of a double alarm is higher than the previous alarm (f.e. SMS after ZVEI). In this case send new information as new alarm ONLY to Telegram
(not FCM/APNS). This can possibly happen minutes after initial alarm. The relevant grace period is set in config.json.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line543">line 543</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit to check for information update.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>information_content</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                An INFORMATION_CONTENT representing the new alerts source.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Wether this alert probably contains new information.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_auth_token_safe"><span class="type-signature"></span>is_auth_token_safe<span class="signature">(token)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures an authentication token contains only valid characters [0-9A-Za-z] and has a length of 10.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line184">line 184</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>token</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The authentication token to check.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input contains only valid characters.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_chat_id_safe"><span class="type-signature"></span>is_chat_id_safe<span class="signature">(chat_id)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures input is a valid telegram chat id (numerical digits, optional -).
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line130">line 130</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>chat_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Chat ID to validate.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input is a valid chat ID;
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_device_token_safe"><span class="type-signature"></span>is_device_token_safe<span class="signature">(token)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures a FCM device token only contains valid characters [0-9a-zA-Z\-\_] and has a varying length.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line200">line 200</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>token</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The FCM device token to check.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input contains only valid characters.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_numeric_safe"><span class="type-signature"></span>is_numeric_safe<span class="signature">(input)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures input only contains numeric digits.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line144">line 144</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Number to validate.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input is a valid number.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_repeat_alarm"><span class="type-signature"></span>is_repeat_alarm<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Check if an alarm for the provided zvei was received within the grace period defined in config.json.
An alert should not be sent if it is a repeat alarm.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line487">line 487</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit to check for double alarm.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Wether the alarm should be suppressed.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_test_time"><span class="type-signature"></span>is_test_time<span class="signature">(zvei_id, timestamp:)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Checks if a given time is inside the test alarm window of a ZVEI unit.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line341">line 341</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of a ZVEI unit.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp:</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                the time to be checked.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    true if the given time is inside the test alarm window, false otherwise
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_text_safe"><span class="type-signature"></span>is_text_safe<span class="signature">(text)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures input only contains valid text characters. Is handled restrictive (A-Za-z0-9_\s).
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line153">line 153</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Text to validate.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input is valid text.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_time_safe"><span class="type-signature"></span>is_time_safe<span class="signature">(time)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures input is a valid time in the format HH:mm.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line168">line 168</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>time</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Text to validate.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input is a valid timestamp.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="is_zvei_safe"><span class="type-signature"></span>is_zvei_safe<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Ensures input is a valid zvei and has no special characters.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of a ZVEI unit. A valid ZVEI always is numerical and between 0 and 99999.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether input is a valid ZVEI.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="queue_alarm"><span class="type-signature"></span>queue_alarm<span class="signature">(zvei_id, timestamp, information_content, text)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Queue an alarm to be sent as soon as possible. This avoids double alerts slipping through.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line52">line 52</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            

            <td class="description last">
                ZVEI ID of the group to be alarmed.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            

            <td class="description last">
                Point in Unix-time when alerm was detected by decoder.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>information_content</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            

            <td class="description last">
                The information level of the alarm source. This is a INFORMATION_CONTENT integer for the alarm interface.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>String</code></span>


            
            </td>

            

            

            <td class="description last">
                Content of the alert message.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Awaitable that returns once the alarm has been handled. False if the alarm was supressed, true otherwise.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="queue_katsys"><span class="type-signature"></span>queue_katsys<span class="signature">(zvei, timestamp, msg)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Callback to queue an alert received internally through KatSys.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line207">line 207</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            

            <td class="description last">
                The alert ZVEI.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            

            <td class="description last">
                The offset corrected timestamp for the alert.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>String</code></span>


            
            </td>

            

            

            <td class="description last">
                The additional alert text.
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="remove_alarm"><span class="type-signature"></span>remove_alarm<span class="signature">(zvei_id, group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Removes an alarm link between a ZVEI unit and a group.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line790">line 790</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the group.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="remove_group"><span class="type-signature"></span>remove_group<span class="signature">(group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Removes a group and all linked alarms.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line732">line 732</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                group ID of the group to be removed.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="remove_user"><span class="type-signature"></span>remove_user<span class="signature">(user_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Deletes the user entry from database and all connected alerts.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line963">line 963</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="remove_user_link"><span class="type-signature"></span>remove_user_link<span class="signature">(user_id, group_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Deletes a group from the subscribed alerts for a user.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line886">line 886</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Group ID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="remove_zvei"><span class="type-signature"></span>remove_zvei<span class="signature">(zvei_id)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Removes a ZVEI unit.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line445">line 445</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                ID of the ZVEI unit to be removed.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="replace_chat_id"><span class="type-signature"></span>replace_chat_id<span class="signature">(current_chat_id, new_chat_id)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Replaces a group chat id.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line216">line 216</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>current_chat_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Old id to be replaced.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>new_chat_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                New id.
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="run_queue"><span class="type-signature">(async) </span>run_queue<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Start alarm queue execution if currently not running.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line70">line 70</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="setup_cleaner"><span class="type-signature"></span>setup_cleaner<span class="signature">(timezone, hour)</span><span class="type-signature"></span></h4>

    



<div class="description">
    To reduce execution time on alert user group status is not checked ad-hoc. Instead a periodic task is run to elimate invalid users regularly.
This sets up the "cleaner" process.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timezone</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>String</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                Timezone to use to determine periodic execution time.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hour</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Number</code></span>


            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">
                At which hour of the day the cleanup process should be run (every day).
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="sql_query"><span class="type-signature"></span>sql_query<span class="signature">(sql, params)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;Object.&lt;String, (String|number)>>>}</span></h4>

    



<div class="description">
    Executes an SQL query with the given parameters.
Hint: Implementation using Promises since db.all is an asynchronous function.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line49">line 49</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sql</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                SQL query to be executed.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;(string|number)></code></span>


            
            </td>

            

            

            <td class="description last">
                list of parameters.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;Object.&lt;String, (String|number)>>></code></span>


    </dd>
</dl>


<div class="param-desc">
    result rows.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="sql_run"><span class="type-signature">(async) </span>sql_run<span class="signature">(sql, params)</span><span class="type-signature"> &rarr; {Promise.&lt;Boolean>}</span></h4>

    



<div class="description">
    Executes an SQL command using run.
The main difference between sql_query and sql_run is that sql_run does not return values from the DB
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sql</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The query to be executed
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;(string|number)></code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Whether the query succeeded
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="start"><span class="type-signature"></span>start<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Startup server with all connected stuff...
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line215">line 215</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="step_alarms"><span class="type-signature">(async) </span>step_alarms<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Execute alarm queue step if items are available.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line80">line 80</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="stop"><span class="type-signature"></span>stop<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Cleanly end the server.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line254">line 254</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="update_group"><span class="type-signature"></span>update_group<span class="signature">(group_id, description)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Updates a group.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line710">line 710</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>group_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                group ID of group to be updated.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                new description of the group.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="update_user"><span class="type-signature"></span>update_user<span class="signature">(user_id, token)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    Adds or updates a user.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line840">line 840</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>token</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                FCM/APNS token.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    Success
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="user_chat_ids"><span class="type-signature"></span>user_chat_ids<span class="signature">(user_id)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;number>>}</span></h4>

    



<div class="description">
    Get all chatIDs linked to the user, if any.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line908">line 908</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID (Telergam).
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Array.&lt;number>></code></span>


    </dd>
</dl>


<div class="param-desc">
    Array of chatIDs. Can be empty.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="user_token"><span class="type-signature"></span>user_token<span class="signature">(user_id)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>

    



<div class="description">
    Get the user device token if at least one valid subscription is present.
Used for alert tests.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="data.js.html">data.js</a>, <a href="data.js.html#line938">line 938</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                User ID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;string></code></span>


    </dd>
</dl>


<div class="param-desc">
    : The FCM device token as string.
</div>

    
</div>



</div>
        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<div class="section-method">

    

    <h4 class="name" id="alarm_queue_callback"><span class="type-signature"></span>alarm_queue_callback<span class="signature">(result)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Alarm queue callback
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>result</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
            
                
<div class="section-members">
<h4 class="name" id="queue_item">queue_item</h4>




<div class="description">
    Alarm queue item
</div>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>zvei_id</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>information_content</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

        

    

        <tr>
            
                <td class="name"><code>result_callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code><a href="global.html#alarm_queue_callback">alarm_queue_callback</a></code></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

        

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server.js.html">server.js</a>, <a href="server.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    

    
</dl>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><code>Object</code></span>


        </li>
    </ul>





</div>

            
    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Sat Aug 13 2022 19:07:14 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>